<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-styles/paper-styles.html">
<link rel="import" href="../../bower_components/iron-icons/maps-icons.html">




<dom-module id="categories-page">
  <template>
    <style>
      :host {
        display: block;
        height:100vh;
        width:100%;
        
      }

    iron-list {

      margin-top:12px;
      @apply(--layout-fit);


    }

    .subItem {padding:16px;@apply(--shadow-elevation-2dp);
      border-radius:2px;
      border-left:4px solid;

      height:64px;
      @apply(--layout-horizontal);
      position: relative;
    
        
    }

    .item {
      padding:4px;
      cursor:pointer;     
      @apply(shadow-elevation-2dp);
      

    }

    .firstRow {

      
      line-height:24px;
    }

    .categoryTitle {
         text-transform: uppercase;
         font-weight:500;
         line-height:24px;  
         font-size:20px;  
    }

    .category {

   
          margin-left:8px;     
         @apply(--layout-vertical);

    }

    .categoryDescription {

        margin-top:4px;
        font-size:11px;
        color:rgb(190,190,190);

    }

    .categoryInfos {


        margin-top:8px;
        @apply(--layout-horizontal);
        font-size:13px;
     


    }

    .categoryInfos > iron-icon{

        margin-right:8px;
        height:16px;
        width:16px;

    }

    </style>
     <firebase-collection id="ref"
                             location="https://popping-heat-2481.firebaseio.com/Categories/"
                             data="{{categories}}">
    </firebase-collection>
 <!-- <iron-list items="[[categories]]" as="category" >
      <template id="categoryListTemplate">

        <div class="item" on-tap="selectCategory">
     
        <div class="subItem" style$="{{computeLeftBorderColor(category)}}">
        <paper-ripple></paper-ripple>

      
        <iron-icon icon="[[category.icon]]"></iron-icon>
        <div class="category flex">
          <div class="categoryTitle">{{getCategory(category)}}</div>
          <div class="categoryInfos">
            <iron-icon icon="[[category.icon]]"></iron-icon> 
            <div class="number">14</div>
            <div style="width:12px"></div>
            <iron-icon icon="icons:star"></iron-icon> 
          </div>
          </div>
          <div style="height:64px;line-height:64px"><iron-icon icon="icons:chevron-right"></iron-icon>
        </div>
      </template>
    </iron-list>   -->
    
    <template is="dom-repeat" id="categoryList" items="{{categories}}" as="category">
         <div class="item" on-tap="selectCategory">
            <div class="subItem" style$="{{computeLeftBorderColor(category)}}">
            <paper-ripple></paper-ripple>
            <iron-icon icon="[[category.icon]]"></iron-icon>
            <div class="category flex">
            <div class="categoryTitle">[[getCategory(category, fromLanguage)]]</div>
            <div class="categoryInfos">
                <iron-icon icon="[[category.icon]]"></iron-icon> 
                <div class="number">14</div>
                <div style="width:12px"></div>
                <iron-icon icon="icons:star"></iron-icon> 
            </div>
          </div>
          <div style="height:64px;line-height:64px"><iron-icon icon="icons:chevron-right"></iron-icon>
        </div>
    </template>
    
  </template>
  <script>
  (function() {
    'use strict';

    Polymer({
     
      is: 'categories-page',
      
      
      properties: {
         fromLanguage: {
                type: String,
                notify: true,
                observer: "_handleFromLanguageChange"
            },
            toLanguage: {
                type: String,
                notify: true
            },
              selectedCategory: {
                type: Object,
                notify: true
            },
           categories:{value:[]}
      },

      computeLeftBorderColor:function(i) {
       if(i.__firebaseKey__ % 6 == 0)
              return "border-color:yellow" 
          if(i.__firebaseKey__ % 5 == 0)
              return "border-color:orange" 
          if(i.__firebaseKey__ % 4 == 0)
              return "border-color:red" 
               if(i.__firebaseKey__ % 3 == 0)
              return "border-color:blue" 
               if(i.__firebaseKey__ % 2 == 0)
              return "border-color:green" 
      },

      selectCategory:function(e) {
         this.fire("category-selected",e.model.category);
      },
      
      
       getCategory:function(category,fromLanguage) {
        //console.log('getting category');
        //console.log(category);
       // console.log(e.model.category);
        return category[this.fromLanguage];

      },
      
       _handleFromLanguageChange: function(){
            
         //   console.log('fromLanguage changed');
           
            this.$.categoryList.render();
       }
      

      
    });
  })();
  </script>
</dom-module>
